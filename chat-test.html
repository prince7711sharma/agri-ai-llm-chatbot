<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--  <meta charset="UTF-8" />-->
<!--  <title>Agri AI Chatbot</title>-->

<!--  <style>-->
<!--    body {-->
<!--      font-family: Arial, sans-serif;-->
<!--      background: #f2f2f2;-->
<!--      display: flex;-->
<!--      justify-content: center;-->
<!--      margin-top: 40px;-->
<!--    }-->

<!--    .chat-container {-->
<!--      width: 400px;-->
<!--      background: #ffffff;-->
<!--      border-radius: 10px;-->
<!--      box-shadow: 0 0 10px rgba(0,0,0,0.1);-->
<!--      display: flex;-->
<!--      flex-direction: column;-->
<!--    }-->

<!--    .chat-header {-->
<!--      background: #2e7d32;-->
<!--      color: white;-->
<!--      padding: 12px;-->
<!--      text-align: center;-->
<!--      font-weight: bold;-->
<!--      border-radius: 10px 10px 0 0;-->
<!--    }-->

<!--    .chat-box {-->
<!--      padding: 10px;-->
<!--      height: 350px;-->
<!--      overflow-y: auto;-->
<!--      background: #fafafa;-->
<!--      display: flex;-->
<!--      flex-direction: column;-->
<!--    }-->

<!--    .message {-->
<!--      margin: 6px 0;-->
<!--      padding: 10px 12px;-->
<!--      border-radius: 10px;-->
<!--      max-width: 70%;-->
<!--      font-size: 14px;-->
<!--      line-height: 1.4;-->
<!--      word-wrap: break-word;-->
<!--    }-->

<!--    /* USER â†’ RIGHT */-->
<!--    .user {-->
<!--      background: #dcf8c6;-->
<!--      align-self: flex-end;-->
<!--      text-align: right;-->
<!--    }-->

<!--    /* BOT â†’ LEFT */-->
<!--    .bot {-->
<!--      background: #eeeeee;-->
<!--      align-self: flex-start;-->
<!--      text-align: left;-->
<!--    }-->

<!--    .chat-input {-->
<!--      display: flex;-->
<!--      border-top: 1px solid #ddd;-->
<!--    }-->

<!--    .chat-input input {-->
<!--      flex: 1;-->
<!--      padding: 10px;-->
<!--      border: none;-->
<!--      outline: none;-->
<!--      font-size: 14px;-->
<!--    }-->

<!--    .chat-input button {-->
<!--      padding: 10px 15px;-->
<!--      border: none;-->
<!--      background: #2e7d32;-->
<!--      color: white;-->
<!--      cursor: pointer;-->
<!--    }-->

<!--    select {-->
<!--      margin-top: 6px;-->
<!--    }-->
<!--  </style>-->
<!--</head>-->

<!--<body>-->

<!--<div class="chat-container">-->

<!--  <div class="chat-header">-->
<!--    ðŸŒ¾ Agri AI Chatbot<br>-->
<!--    <select id="lang">-->
<!--      <option value="en">English</option>-->
<!--      <option value="hi">Hindi</option>-->
<!--    </select>-->
<!--  </div>-->

<!--  <div id="chatBox" class="chat-box">-->
<!--    <div class="message bot">-->
<!--      Hello ðŸ‘‹ I am your agriculture assistant. Ask me anything.-->
<!--    </div>-->
<!--  </div>-->

<!--  <div class="chat-input">-->
<!--    <input id="messageInput" placeholder="Type your question..." />-->
<!--    <button onclick="sendMessage()">Send</button>-->
<!--  </div>-->

<!--</div>-->

<!--<script>-->
<!--  const chatBox = document.getElementById("chatBox");-->

<!--  function addMessage(text, sender) {-->
<!--    const msg = document.createElement("div");-->
<!--    msg.className = "message " + sender;-->
<!--    msg.innerText = text;-->
<!--    chatBox.appendChild(msg);-->
<!--    chatBox.scrollTop = chatBox.scrollHeight;-->
<!--  }-->

<!--  async function sendMessage() {-->
<!--    const input = document.getElementById("messageInput");-->
<!--    const language = document.getElementById("lang").value;-->
<!--    const message = input.value.trim();-->

<!--    if (!message) return;-->

<!--    // USER MESSAGE (RIGHT)-->
<!--    addMessage(message, "user");-->
<!--    input.value = "";-->

<!--    // BOT TYPING (LEFT)-->
<!--    addMessage("â³ Typing...", "bot");-->

<!--    try {-->
<!--      const res = await fetch(-->
<!--        "https://agri-ai-llm-chatbot.onrender.com/api/v1/chat",-->
<!--        {-->
<!--          method: "POST",-->
<!--          headers: { "Content-Type": "application/json" },-->
<!--          body: JSON.stringify({ message, language })-->
<!--        }-->
<!--      );-->

<!--      const data = await res.json();-->

<!--      chatBox.lastChild.remove(); // remove typing-->
<!--      addMessage(data.reply, "bot");-->

<!--    } catch (err) {-->
<!--      chatBox.lastChild.remove();-->
<!--      addMessage("âŒ Error connecting to chatbot", "bot");-->
<!--    }-->
<!--  }-->
<!--</script>-->

<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agri Assistant</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

  <style>
    :root {
      --primary-color: #43a047;
      --primary-dark: #2e7d32;
      --bg-color: #e8f5e9;
      --chat-bg: #ffffff;
      --user-msg-bg: #dcedc8;
      --bot-msg-bg: #f1f0f0;
      --text-color: #333;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg-color);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    .chat-card {
      width: 100%;
      max-width: 420px;
      background: var(--chat-bg);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      display: flex;
      flex-direction: column;
      height: 85vh;
      overflow: hidden;
    }

    .chat-header {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-color));
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-info h3 {
      margin: 0;
      font-size: 1.2rem;
    }

    .header-info p {
      margin: 0;
      font-size: 0.8rem;
    }

    .chat-box {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .message {
      max-width: 80%;
      padding: 12px 16px;
      font-size: 0.95rem;
      line-height: 1.5;
      border-radius: 15px;
      word-wrap: break-word;
    }

    .bot {
      background: var(--bot-msg-bg);
      align-self: flex-start;
      border-radius: 0 15px 15px 15px;
    }

    .user {
      background: var(--user-msg-bg);
      align-self: flex-end;
      color: #1b5e20;
      border-radius: 15px 0 15px 15px;
    }

    .suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-left: 10px;
      margin-top: -6px;
    }

    .suggestion-chip {
      background: #e8f5e9;
      color: #2e7d32;
      border: 1px solid #c8e6c9;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.75rem;
      cursor: pointer;
    }

    .suggestion-chip:hover {
      background: #c8e6c9;
    }

    .chat-input-area {
      padding: 15px;
      background: #f9f9f9;
      border-top: 1px solid #eee;
      display: flex;
      gap: 10px;
    }

    .chat-input-area input {
      flex: 1;
      padding: 12px 15px;
      border-radius: 25px;
      border: 1px solid #ddd;
      outline: none;
    }

    .send-btn {
      background: var(--primary-color);
      border: none;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      color: white;
      cursor: pointer;
    }
  </style>
</head>

<body>

<div class="chat-card">

  <div class="chat-header">
    <div class="header-info">
      <h3>Agri Assistant</h3>
      <p>Your Farm Helper ðŸŒ¾</p>
    </div>
  </div>

  <div id="chatBox" class="chat-box">
    <div class="message bot">
      Hello ðŸ‘‹ I am <b>Agri Assistant</b>.<br><br>
      I help farmers with crops, irrigation, fertilizers, diseases, and weather advice ðŸŒ±
    </div>
  </div>

  <div class="chat-input-area">
    <input id="messageInput" type="text" placeholder="Ask something about farming..." />
    <button onclick="sendMessage()" class="send-btn">
      <i class="fa-solid fa-paper-plane"></i>
    </button>
  </div>

</div>

<script>
  const chatBox = document.getElementById("chatBox");
  const messageInput = document.getElementById("messageInput");

  function addMessage(text, sender, suggestions = []) {
    const msg = document.createElement("div");
    msg.className = "message " + sender;
    msg.innerHTML = text.replace(/\n/g, "<br>");
    chatBox.appendChild(msg);

    if (sender === "bot" && suggestions.length > 0) {
      const sugDiv = document.createElement("div");
      sugDiv.className = "suggestions";

      suggestions.forEach(s => {
        const chip = document.createElement("div");
        chip.className = "suggestion-chip";
        chip.innerText = s;
        chip.onclick = () => {
          messageInput.value = s;
          sendMessage();
        };
        sugDiv.appendChild(chip);
      });

      chatBox.appendChild(sugDiv);
    }

    chatBox.scrollTop = chatBox.scrollHeight;
  }

  async function sendMessage() {
    const message = messageInput.value.trim();
    if (!message) return;

    addMessage(message, "user");
    messageInput.value = "";

    const typing = document.createElement("div");
    typing.className = "message bot";
    typing.innerText = "Thinking... ðŸŒ±";
    chatBox.appendChild(typing);
    chatBox.scrollTop = chatBox.scrollHeight;

    try {
      const res = await fetch(
        "https://agri-ai-llm-chatbot.onrender.com/api/v1/chat",
        {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ message })
        }
      );

      const data = await res.json();
      chatBox.removeChild(typing);

      addMessage(
        data.reply || "Sorry, I couldn't understand.",
        "bot",
        data.suggestions || []
      );

    } catch (err) {
      chatBox.removeChild(typing);
      addMessage("âŒ Server error. Please try again.", "bot");
    }
  }

  messageInput.addEventListener("keypress", e => {
    if (e.key === "Enter") sendMessage();
  });
</script>

</body>
</html>
